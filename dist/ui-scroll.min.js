/*!
 * angular-ui-scroll
 * https://github.com/angular-ui/ui-scroll.git
 * Version: 1.5.2 -- 2016-12-09T11:37:50.853Z
 * License: MIT
 */
!function(){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};angular.module("ui.scroll",[]).directive("uiScrollViewport",function(){return{restrict:"A",controller:["$log","$scope","$element",function(a,b,c){var d=this;d.container=c,d.viewport=c,angular.forEach(c.children(),function(a){"tbody"===a.tagName.toLowerCase()&&(d.viewport=angular.element(a))})}]}}).directive("uiScroll",["$log","$injector","$rootScope","$timeout","$q","$parse","$window",function(b,c,d,e,f,g,h){function i(a,b){return b.after(a),[]}function j(a){return a.element.remove(),a.scope.$destroy(),[]}function k(b,c){if(!q)return i(b,c);if(r){var d=function(){var a=f.defer();return q.enter(b,null,c,function(){return a.resolve()}),{v:[a.promise]}}();if("object"===("undefined"==typeof d?"undefined":a(d)))return d.v}return[q.enter(b,null,c)]}function l(b){if(!q)return j(b);if(r){var c=function(){var a=f.defer();return q.leave(b.element,function(){return b.scope.$destroy(),a.resolve()}),{v:[a.promise]}}();if("object"===("undefined"==typeof c?"undefined":a(c)))return c.v}return[q.leave(b.element).then(function(){return b.scope.$destroy()})]}function m(a){var b=Object.create(Array.prototype);return angular.extend(b,{size:a,reset:function(a){b.remove(0,b.length),b.eof=!1,b.bof=!1,b.first=a,b.next=a,b.minIndex=a,b.maxIndex=a,b.minIndexUser=null,b.maxIndexUser=null},append:function(a){a.forEach(function(a){++b.next,b.insert("append",a)}),b.maxIndex=b.eof?b.next-1:Math.max(b.next-1,b.maxIndex)},prepend:function(a){a.reverse().forEach(function(a){--b.first,b.insert("prepend",a)}),b.minIndex=b.bof?b.minIndex=b.first:Math.min(b.first,b.minIndex)},insert:function(a,c){var d={item:c};if(a%1===0)d.op="insert",b.splice(a,0,d);else switch(d.op=a,a){case"append":b.push(d);break;case"prepend":b.unshift(d)}},remove:function(a,c){if(angular.isNumber(a)){for(var d=a;d<c;d++)j(b[d]);return b.splice(a,c-a)}return b.splice(b.indexOf(a),1),l(a)},effectiveHeight:function(a){if(!a.length)return 0;var b=Number.MAX_VALUE,c=Number.MIN_VALUE;return a.forEach(function(a){a.element[0].offsetParent&&(b=Math.min(b,a.element.offset().top),c=Math.max(c,a.element.offset().top+a.element.outerHeight(!0)))}),Math.max(0,c-b)}}),b}function n(a,b,c,d){function e(){var a=Object.create(Array.prototype);return angular.extend(a,{add:function(b){for(var c=a.length-1;c>=0;c--)if(a[c].index===b.scope.$index)return void(a[c].height=b.element.outerHeight(!0));a.push({index:b.scope.$index,height:b.element.outerHeight(!0)})},clear:function(){a.length=0}}),a}function f(a){var b=void 0;switch(a.tagName){case"dl":throw new Error("ui-scroll directive does not support <"+a.tagName+"> as a repeating tag: "+a.outerHTML);case"tr":var c=angular.element("<table><tr><td><div></div></td></tr></table>");b=c.find("tr");break;case"li":b=angular.element("<li></li>");break;default:b=angular.element("<div></div>")}return b.cache=new e,b}function g(){return l.outerHeight()*d}var h=void 0,j=void 0,l=c&&c.viewport?c.viewport:angular.element(window),m=c&&c.container?c.container:void 0;return l.css({"overflow-y":"auto",display:"block"}),angular.extend(l,{createPaddingElements:function(a){h=new f(a),j=new f(a),b.before(h),b.after(j)},applyContainerStyle:function(){m&&m!==l&&l.css("height",window.getComputedStyle(m[0]).height)},bottomDataPos:function(){var a=l[0].scrollHeight;return a=null!=a?a:l[0].document.documentElement.scrollHeight,a-j.height()},topDataPos:function(){return h.height()},bottomVisiblePos:function(){return l.scrollTop()+l.outerHeight()},topVisiblePos:function(){return l.scrollTop()},insertElement:function(a,b){return i(a,b||h)},insertElementAnimated:function(a,b){return k(a,b||h)},shouldLoadBottom:function(){return!a.eof&&l.bottomDataPos()<l.bottomVisiblePos()+g()},clipBottom:function(){if(0!==s){for(var b=0,c=0,d=0,e=l.bottomDataPos()-l.bottomVisiblePos()-g(),f=a.length-1;f>=0&&(d=a[f].element.outerHeight(!0),!(c+d>e));){for(var h=Math.min((a.length-b)%s||s,a.length-b),i=0;i<h;i++)j.cache.add(a[f-i]);f-=h,c+=d,b+=h}b>0&&(a.eof=!1,a.remove(a.length-b,a.length),a.next-=b,l.adjustPadding())}},shouldLoadTop:function(){return!a.bof&&l.topDataPos()>l.topVisiblePos()-g()},clipTop:function(){if(0!==s){for(var b=0,c=0,d=0,e=l.topVisiblePos()-l.topDataPos()-g(),f=0,i=0;i<a.length&&(d=a[i].element.outerHeight(!0),!(c+d>e));){for(f=0;f<s&&a[i+f];f++)h.cache.add(a[i+f]);if(f!==s){f>0&&(c+=d),b+=f-1;break}i+=s,c+=d,b+=s}b>0&&(h.height(h.height()+c),a.bof=!1,a.remove(0,b),a.first+=b)}},adjustPadding:function(){if(a.length&&s){var b=void 0,c=void 0;1===s?(b=h.cache.reduce(function(b,c){return b+(c.index<a.first?c.height:0)},0),c=j.cache.reduce(function(b,c){return b+(c.index>=a.next?c.height:0)},0)):(b=h.cache.reduce(function(b,c){return b+(c.index<a.first&&c.index%s==1?c.height:0)},0),c=j.cache.reduce(function(b,c){return b+(c.index>=a.next&&c.index%s==1?c.height:0)},0)),c=1===s?j.cache.reduce(function(b,c){return b+(c.index>=a.next?c.height:0)},0):j.cache.reduce(function(b,c){return b+(c.index>=a.next&&c.index%s==1?c.height:0)},0);var d=void 0;d=1===s?a.reduce(function(a,b){return a+b.element.outerHeight(!0)},0):a.reduce(function(a,b){return a+(b.index%s==1?b.element.outerHeight(!0):0)},0);var e=(d+b+c)/(a.maxIndex-a.minIndex+1),f=null!==a.minIndexUser&&a.minIndex>a.minIndexUser,g=null!==a.maxIndexUser&&a.maxIndex<a.maxIndexUser,i=f?(a.minIndex-a.minIndexUser)*e:0,k=g?(a.maxIndexUser-a.maxIndex)*e:0;h.height(b+i),j.height(c+k)}},adjustScrollTopAfterMinIndexSet:function(b){if(null!==a.minIndexUser&&a.minIndex>a.minIndexUser){var c=h.height()-b;l.scrollTop(l.scrollTop()+c)}},adjustScrollTopAfterPrepend:function(b){if(b.prepended.length){var c=a.effectiveHeight(b.prepended),d=h.height()-c;d>=0?h.height(d):(h.height(0),l.scrollTop(l.scrollTop()-d))}},resetTopPadding:function(){h.height(0),h.cache.clear()},resetBottomPadding:function(){j.height(0),j.cache.clear()}}),l}function o(a,b,c,e,f){function h(b){var c=a[b],d=j,e=void 0;if(c){var h=c.match(/^(\S+)(?:\s+on\s+(\w(?:\w|\d)*))?/);if(!h)throw new Error("Expected injection expression in form of 'target' or 'target on controller' but got '"+c+"'");var i=h[1],k=h[2],m=function(a,b){for(var c=f;c.length;){var e=c.scope(),g=(c.attr("ng-controller")||"").match(/(\w(?:\w|\d)*)(?:\s+as\s+(\w(?:\w|\d)*))?/);if(g&&g[b?1:2]===a)return d=e,!0;if(!b&&e&&e.hasOwnProperty(a)&&Object.getPrototypeOf(e[a]).constructor.hasOwnProperty("$inject"))return d=e,!0;c=c.parent()}};if(k){if(d=null,m(k,!0),!d)throw new Error("Failed to locate target controller '"+k+"' to inject '"+i+"'")}else{var n=void 0,o=i.indexOf(".");o>0&&(n=i.substr(0,o),m(n,!1))}e=g(i).assign}return function(a){l!==a&&(l[b]=a),e&&e(d,a)}}function i(a,b){if(angular.isArray(b)){var d=void 0,e=c.indexOf(a)+1;b.reverse().forEach(function(b){b===a.item?(d=!0,e--):c.insert(e,b)}),d||(a.op="remove")}}var j=b.scope()||d,k=!1,l=this;h("adapter")(l);var m=h("topVisible"),n=h("topVisibleElement"),o=h("topVisibleScope"),p=h("isLoading");Object.defineProperty(this,"disabled",{get:function(){return k},set:function(a){return(k=a)?null:e()}}),this.isLoading=!1,this.isBOF=function(){return c.bof},this.isEOF=function(){return c.eof},this.applyUpdates=function(a,b){if(angular.isFunction(a))c.slice(0).forEach(function(b){i(b,a(b.item,b.scope,b.element))});else{if(a%1!==0)throw new Error("applyUpdates - "+a+" is not a valid index");var d=a-c.first;d>=0&&d<c.length&&i(c[d],b)}e()},this.append=function(a){c.append(a),e()},this.prepend=function(a){c.prepend(a),e()},this.loading=function(a){p(a)},this.calculateProperties=function(){for(var a=void 0,d=void 0,e=void 0,f=void 0,g=void 0,h=0,i=0;i<c.length;i++){if(a=c[i],e=a.element.offset().top,f=g!==e,g=e,f&&(d=a.element.outerHeight(!0)),!(f&&b.topDataPos()+h+d<=b.topVisiblePos())){f&&(m(a.item),n(a.element),o(a.scope));break}h+=d}}}function p(a,b,i,j,k){function l(b,c){var d=g(b)(a);return isNaN(d)?c:d}function p(a,b,c){var d=Object.getOwnPropertyDescriptor(a,b);d&&(d.set||d.get)||Object.defineProperty(a,b,{set:function(a){_[b]=a,e(function(){if(X[c]=a,!W.length){var d=Y.topDataPos();Y.adjustPadding(),"minIndex"===b&&Y.adjustScrollTopAfterMinIndexSet(d)}})},get:function(){return _[b]}})}function q(b){return b&&b!==V||a.$$destroyed}function r(){Y.bind("resize",F),Y.bind("scroll",F)}function t(){Y.unbind("resize",F),Y.unbind("scroll",F)}function u(){Y.resetTopPadding(),Y.resetBottomPadding(),arguments.length&&(U=arguments[0]),X.reset(U),C()}function v(a){return a.element.height()&&a.element[0].offsetParent}function w(a){v(a)&&(X.forEach(function(a){angular.isFunction(a.unregisterVisibilityWatcher)&&(a.unregisterVisibilityWatcher(),delete a.unregisterVisibilityWatcher)}),C())}function x(a,b){y(a,b,Y.insertElement),v(a)||(a.unregisterVisibilityWatcher=a.scope.$watch(function(){return w(a)})),a.element.addClass("ng-hide")}function y(a,b,c){var d=void 0,e=b>0?X[b-1].element:void 0;return k(function(b,f){d=c(b,e),a.element=b,a.scope=f,f[P]=a.item}),Z.transform&&Z.transform(a.scope,a.element),d}function z(){var a=[],b=[],c=[],d=[];return X.forEach(function(e,f){switch(e.op){case"prepend":b.unshift(e);break;case"append":x(e,f),e.op="none",d.push(e);break;case"insert":a=a.concat(y(e,f,Y.insertElementAnimated)),e.op="none",d.push(e);break;case"remove":c.push(e)}}),c.forEach(function(b){return a=a.concat(X.remove(b))}),b.length&&b.forEach(function(a){x(a),a.op="none"}),X.forEach(function(a,b){return a.scope.$index=X.first+b}),{prepended:b,removed:c,inserted:d,animated:a}}function A(a,b){b.animated.length?f.all(b.animated).then(function(){Y.adjustPadding(),C(a)}):Y.adjustPadding()}function B(a,b){Y.shouldLoadBottom()?(!b||X.effectiveHeight(b.inserted)>0)&&1===W.push(!0)&&(E(a),Z.loading(!0)):Y.shouldLoadTop()&&(!b||X.effectiveHeight(b.prepended)>0||W[0])&&1===W.push(!1)&&(E(a),Z.loading(!0))}function C(a){a||(W=[],a=++V);var b=z();e(function(){b.inserted.forEach(function(a){return a.element.removeClass("ng-hide")}),b.prepended.forEach(function(a){return a.element.removeClass("ng-hide")}),q(a)||(A(a,b),B(a),W.length||Z.calculateProperties())})}function D(a){var b=z();e(function(){b.inserted.forEach(function(a){return a.element.removeClass("ng-hide")}),b.prepended.forEach(function(a){return a.element.removeClass("ng-hide")}),Y.adjustScrollTopAfterPrepend(b),q(a)||(A(a,b),B(a,b),W.shift(),W.length?E(a):(Z.loading(!1),r(),Z.calculateProperties(),0===s&&H()))})}function E(a){W[0]?X.length&&!Y.shouldLoadBottom()?D(a):aa(function(b){q(a)||(b.length<S&&(X.eof=!0),b.length>0&&(Y.clipTop(),X.append(b)),D(a))}):X.length&&!Y.shouldLoadTop()?D(a):ba(function(b){q(a)||(0===s?b.length<S&&(X.bof=!0):b.length<S-S%s&&(X.bof=!0),b.length>0&&(X.length&&Y.clipBottom(),X.prepend(b)),D(a))})}function F(){d.$$phase||Z.isLoading||Z.disabled||(B(V),W.length?t():(Z.calculateProperties(),a.$apply()))}function G(){H(),F()}function H(){if(1===Y.find("ul").length){var a=Y[0].querySelectorAll("li:not(.ng-hide)");if(a.length>1)for(var b=a[0].offsetTop,c=1;c<a.length;c++)if(a[c].offsetTop!==b){s=c;break}}else s=1}function I(a){if(!Z.disabled){var b=Y[0].scrollTop,c=Y[0].scrollHeight-Y[0].clientHeight;(0===b&&!X.bof||b===c&&!X.eof)&&a.preventDefault()}}a.$on("$destroy",function(){h.onresize=void 0}),a.sizeNotifier=G,h.onresize=a.sizeNotifier,s=0;var J=i.uiScroll.match(/^\s*(\w+)\s+in\s+([(\w|\$)\.]+)\s*$/);if(!J)throw new Error("Expected uiScroll in form of '_item_ in _datasource_' but got '"+i.uiScroll+"'");var K=3,L=10,M=.3,N=.5,O=null,P=J[1],Q=J[2],R=j[0],S=Math.max(K,l(i.bufferSize,L)),T=Math.max(M,l(i.padding,N)),U=l(i.startIndex,1),V=0,W=[],X=new m(S),Y=new n(X,b,R,T),Z=new o(i,Y,X,C,b);R&&(R.adapter=Z);var $=function(){return angular.isObject(O)&&angular.isFunction(O.get)};if(O=g(Q)(a),!$()&&(O=c.get(Q),!$()))throw new Error(Q+" is not a valid datasource");var _={};p(O,"minIndex","minIndexUser"),p(O,"maxIndex","maxIndexUser");var aa=2!==O.get.length?function(a){return O.get(X.next,S,a)}:function(a){O.get({index:X.next,append:X.length?X[X.length-1].item:void 0,count:S},a)},ba=2!==O.get.length?function(a){var b=S-S%(s||S);X.first-b<0&&(b+=X.first-b),O.get(X.first-b,b,a)}:function(a){var b=S-S%(s||S);X.first-b<0&&(b+=X.first-b),O.get({index:X.first-b,prepend:X.length?X[0].item:void 0,count:b},a)};Z.reload=u,k(function(a,b){Y.createPaddingElements(a[0]),b.$destroy(),a.remove()}),a.$on("$destroy",function(){t(),Y.unbind("mousewheel",I)}),Y.bind("mousewheel",I),e(function(){Y.applyContainerStyle(),u()})}var q=c.has&&c.has("$animate")?c.get("$animate"):null,r=1===angular.version.major&&angular.version.minor<3,s=0;return{require:["?^^uiScrollViewport"],restrict:"A",transclude:"element",priority:1e3,terminal:!0,link:p}}])}();